<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
    </head>
    <body>
        <script type="text/javascript">
        (function (whitelist, blacklist) {
            function parseQueryNames() {
                var r = [];
                var queryStr = window.location.search;
                if (queryStr.length > 0) {
                    r = queryStr.substr(1).split('&');
                    for (var i = 0, len = r.length; i < len; i++) {
                        r[i] = decodeURIComponent(r[i].split('=')[0]);
                    }
                }
                return r;
            }

            function getCookie(name) {
                var arr, reg = new RegExp('(^| )' + name + '=([^;]*)(;|$)');
                return (arr = window.document.cookie.match(reg)) ? unescape(arr[2]) : null;
            }
            
            function isArray(arr) {
                return Object.prototype.toString.call(arr) === '[object Array]';
            }
            
            function inArray(item, arr) {
                for (var i = 0, len = arr.length; i < len; i++) {
                    if (item === arr[i]) return i;
                }
                return -1;
            }
            
            if (!isArray(whitelist) && !isArray(blacklist)) return;
            var cookies = {};
            var cookieNames = parseQueryNames();
            for (var i = 0, len = cookieNames.length; i < len; i++) {
                if (isArray(whitelist)) {
                    if (inArray(cookieNames[i], whitelist) < 0) continue;
                }
                if (isArray(blacklist)) {
                    if (inArray(cookieNames[i], blacklist) >= 0) continue;
                }
                var v = getCookie(cookieNames[i]);
                if (v !== '') {
                    cookies[cookieNames[i]] = v;
                }
            }
            window.parent.postMessage('[iframexcookie]' + JSON.stringify(cookies), '*');
        })([/* Define a whitelist of cookie names here. */]);
        </script>
    </body>
</html>
