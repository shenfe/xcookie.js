!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.iframexcookie=n()}(this,function(){"use strict";function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var o in t)n[o]=t[o]}return n}function n(t){function o(n,r,i){var c;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},o.defaults,i)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(h){}r=t.write?t.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var d="";for(var s in i)i[s]&&(d+="; "+s,!0!==i[s]&&(d+="="+i[s]));return document.cookie=n+"="+r+d}n||(c={});for(var f=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,u=0;u<f.length;u++){var l=f[u].split("="),m=l.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{var v=l[0].replace(p,decodeURIComponent);if(m=t.read?t.read(m,v):t(m,v)||m.replace(p,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(h){}if(n===v){c=m;break}n||(c[v]=m)}catch(h){}}return c}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(n,t){o(n,"",e(t,{expires:-1}))},o.withConverter=n,o}var t=n(function(){});return function(e){function n(e){var n=window.document.createElement("a");n.href=e;var t=n.hostname;if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t))return t;var o=t.split(".");return o.length>2?"."+o.slice(o.length-2).join("."):o.join(".")}function o(e,n){var t="xcookie-"+e.replace(/\./g,"_"),o=window.document.getElementById(t);return o||((o=window.document.createElement("iframe")).id=t,o.style.display="none",window.document.body.appendChild(o)),n!==undefined?o.src=n:o.src="",o}function r(e){return"[object Array]"===Object.prototype.toString.call(a)?e:a[e]}function i(e){if("[iframexcookie]"===e.data.substr(0,"[iframexcookie]".length)){var n=JSON.parse(e.data.substr("[iframexcookie]".length));for(var o in n)n.hasOwnProperty(o)&&null!=n[o]&&t.set(r(o),n[o],{expires:7,domain:f,path:"/"});d&&d(n),p&&window.document.body.removeChild(u)}}var c=e.src,a=e.cookieNames,d=e.doneWith,s=n(c),f=n(window.location.href),p=!!e.autoRemove,u=o(s);window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i),o(s,c+"?"+function(e){var n="";if("[object Array]"===Object.prototype.toString.call(a))for(var t=0,o=e.length;t<o;t++)0===t?n=encodeURIComponent(e[t]):n+="&"+encodeURIComponent(e[t]);else{t=0;for(var r in e)e.hasOwnProperty(r)&&(0===t?(t++,n=encodeURIComponent(r)):n+="&"+encodeURIComponent(r))}return n}(a))}});
